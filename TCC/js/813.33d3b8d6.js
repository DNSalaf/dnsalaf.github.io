"use strict";(self["webpackChunksmal_web_version"]=self["webpackChunksmal_web_version"]||[]).push([[813],{3813:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var o=a(9835),l=a(6970);const s={class:"row",style:{"margin-top":"auto","margin-bottom":"auto","margin-left":"auto"}},r={class:"text-right"},n={class:"col-12"},i={class:"row"},c={class:"col-xs-12 col-sm-6 col-md-3 q-pa-sm"},u={class:"text-h5 text-white"},d={class:"col-xs-12 col-sm-6 col-md-3 q-pa-sm"},m={class:"text-h5 text-white"},w={class:"col-xs-12 col-sm-6 col-md-3 q-pa-sm"},g={class:"text-h5 text-white"},p={class:"col-xs-12 col-sm-6 col-md-3 q-pa-sm"},h={class:"text-h5 text-white"},v={class:"col-xs-12 col-sm-6 col-md-3 q-pa-sm"},_={class:"text-h5 text-white"},f={class:"col-xs-12 col-sm-6 col-md-3 q-pa-sm"},x={class:"text-h5 text-white"},b={class:"col-12 justify-center flex",style:{"margin-top":"10px"}};function V(e,t,a,V,C,y){const q=(0,o.up)("q-btn"),D=(0,o.up)("CardBadge"),I=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(I,{class:"row q-ma-sm"},{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o._)("td",r,[(0,o.Wm)(q,{color:"primary",label:"Selecionar Porta","no-caps":"",onClick:y.created},null,8,["onClick"])])]),(0,o._)("div",n,[(0,o._)("div",i,[(0,o._)("div",c,[(0,o.Wm)(D,{title:"Temperatura",borderColor:"red",color:"red"},{content:(0,o.w5)((()=>[(0,o._)("div",u,(0,l.zw)(y.getValue1)+"°C ",1)])),_:1})]),(0,o._)("div",d,[(0,o.Wm)(D,{title:"Oximetria",borderColor:"green",color:"blue"},{content:(0,o.w5)((()=>[(0,o._)("div",m,(0,l.zw)(y.getValue2)+" % ",1)])),_:1})]),(0,o._)("div",w,[(0,o.Wm)(D,{title:"Frequência de Pulso",borderColor:"green",color:"green"},{content:(0,o.w5)((()=>[(0,o._)("div",g,(0,l.zw)(y.getValue3)+" bpm ",1)])),_:1})]),(0,o._)("div",p,[(0,o.Wm)(D,{title:"Respiração",borderColor:"yellow",color:"yellow"},{content:(0,o.w5)((()=>[(0,o._)("div",h,(0,l.zw)(y.getValue4)+" IRPM ",1)])),_:1})]),(0,o._)("div",v,[(0,o.Wm)(D,{title:"Frequência Cardíaca",borderColor:"purple",color:"purple"},{content:(0,o.w5)((()=>[(0,o._)("div",_,(0,l.zw)(y.getValue5)+" bpm ",1)])),_:1})]),(0,o._)("div",f,[(0,o.Wm)(D,{title:"Pressão Não Invasiva",borderColor:"orange",color:"orange"},{content:(0,o.w5)((()=>[(0,o._)("div",x,(0,l.zw)(y.getValue6)+" mmHg ",1)])),_:1})]),(0,o._)("div",b," Última Leitura: "+(0,l.zw)(C.leitura),1)])])])),_:1})}const C={class:"col"};function y(e,t,a,s,r,n){const i=(0,o.up)("q-card-section"),c=(0,o.up)("q-icon"),u=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(u,{class:"shadow-8",style:(0,l.j5)(a.borderColor?`border-left: .25rem solid ${a.borderColor} !important;`:"")},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{horizontal:"",class:"row"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"col-xs-8 justify-center"},{default:(0,o.w5)((()=>[(0,o._)("div",C,[(0,o._)("div",{class:(0,l.C_)(`text-subtitle1 text-weight-medium text-${a.color}`)},(0,l.zw)(a.title),3),(0,o._)("div",null,[(0,o.WI)(e.$slots,"content")])])])),_:3}),(0,o.Wm)(i,{class:"col-xs-4 content-center text-right"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{name:a.icon,class:"text-blue-grey-2",size:"lg"},null,8,["name"])])),_:1})])),_:3})])),_:3},8,["style"])}const q={name:"CardBadge",props:{title:{type:String,required:!0},icon:{type:String,default:""},color:{type:String,default:"blue-grey-8"},borderColor:{type:String,default:"#616161"}}};var D=a(1639),I=a(4458),T=a(3190),M=a(2857),S=a(9984),W=a.n(S);const z=(0,D.Z)(q,[["render",y]]),k=z;function $(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))}function P(e){return JSON.parse(window.sessionStorage.getItem(e))}function Z(e){return new Promise((t=>setTimeout(t,e)))}function j(e){let t=0,a=1;"1"===e[0]&&(a=-1);let o=parseInt(e[1])*Math.pow(2,7)+parseInt(e[2])*Math.pow(2,6)+parseInt(e[3])*Math.pow(2,5)+parseInt(e[4])*Math.pow(2,4)+parseInt(e[5])*Math.pow(2,3)+parseInt(e[6])*Math.pow(2,2)+parseInt(e[7])*Math.pow(2,1)+parseInt(e[8])*Math.pow(2,0);o-=127;let l=-1,s=0;for(let r=0;r<23;r++){const t=e[r+9];s+=t*Math.pow(2,l),l--}return s+=1,t=a*Math.pow(2,o)*s/10,t.toFixed(2)}W()(q,"components",{QCard:I.Z,QCardSection:T.Z,QIcon:M.Z});const N={name:"IndexPage",data(){return{dataValue:[0,0,0,0,0,0],leitura:"nenhum dado recebido"}},components:{CardBadge:k},computed:{getValue1(){return`${this.dataValue[0]}`},getValue2(){return`${this.dataValue[1]}`},getValue3(){return`${this.dataValue[2]}`},getValue4(){return`${this.dataValue[3]}`},getValue5(){return`${this.dataValue[4]}`},getValue6(){return`${this.dataValue[5]}`}},setup(){},methods:{async handleData(){if("serial"in navigator){let t=new Date,a=new Date,o=new Date,l=new Date,s=new Date,r=new Date;const n=await navigator.serial.requestPort();await n.open({baudRate:115200}),await Z(500);while(n.readable){const i=n.readable.getReader();try{while(1){const{value:c,done:u}=await i.read();if(c){const d=6,m=4,w=[];for(let g=0;g<m*d;g+=m){const p=(c[g]<<24)+(c[g+1]<<16)+(c[g+2]<<8)+c[g+3];p>=0&&(w[g/m]=p.toString(2)),31===w[g/m].length&&(w[g/m]="0"+w[g/m]);const h=j(w[g/m]),v=g/m+1,_="value"+v;if(console.log(_,h),!isNaN(h)){const f=new Date,x=new Date,b=new Date,V=new Date,C=new Date,y=new Date;this.leitura=new Date;const q=1;function D(e){return"999.00"===e?"- ? -":e}function I(){const e=P(_);let t=new Date,a=t.getHours(),o=t.getMinutes(),l=t.getSeconds();a<=9&&(a="0"+a),o<=9&&(o="0"+o),l<=9&&(l="0"+l),t=a+":"+o+":"+l;const s=[{time:t,value:h}];e?(e.push(s),$(_,e)):$(_,s)}"value1"===_&&f.getTime()-t.getTime()>=1e3*q&&(I(),this.dataValue[0]=D(h),t=f),"value2"===_&&x.getTime()-a.getTime()>=1e3*q&&(I(),this.dataValue[1]=D(h),a=x),"value3"===_&&b.getTime()-o.getTime()>=1e3*q&&(I(),this.dataValue[2]=D(h),o=b),"value4"===_&&V.getTime()-l.getTime()>=1e3*q&&(I(),this.dataValue[3]=D(h),l=V),"value5"===_&&C.getTime()-s.getTime()>=1e3*q&&(I(),this.dataValue[4]=D(h),s=C),"value6"===_&&y.getTime()-r.getTime()>=1e3*q&&(I(),this.dataValue[5]=D(h),r=y)}}}if(u){i.releaseLock();break}}}catch(e){}finally{i.releaseLock()}}await n.close()}},async created(){this.handleData()}}};var Q=a(9885),B=a(2731);const R=(0,D.Z)(N,[["render",V]]),F=R;W()(N,"components",{QPage:Q.Z,QBtn:B.Z})}}]);